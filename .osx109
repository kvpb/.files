#!/usr/bin/env bash

default='\033[0;39m'
hidefault='\033[0;30;39m'
white='\033[0;37m'
hiwhite='\033[0;30;47m'
red='\033[0;31m'
hired='\033[0;30;31m'
green='\033[0;32m'
higreen='\033[1;30;32'
blue='\033[0;34m'
hiblue='\033[0;30;34m'
drkgray='\033[0;90m'
hidrkgray='\033[0;30;90m'
cyan='\033[0;36m'
hicyan='\033[0;30;36m'
magenta='\033[0;35m'
himagenta='\033[0;30;35m'
yellow='\033[0;33m'
hiyellow='\033[0;30;33m'
key='\033[0;30m'
hikey='\033[0;97;40m'
#osxmavericksphotoansinearestmeancolor='\033[0;180m' # (i) OS X 10.9 Mavericks icon photo mean color, uncropped, filling the square: rgb(, , ), # or hsl(, %, %); nearest HTML color:  or #; nearest ANSI color:  or #.
# Set graphics mode. (i) ANSI escape sequences format: \033[${textattribute};${foregroundcolor};${backgroundcolor}m (or esc[${value};...;${value}m).
clearedstyleandformatting=`tput sgr0` #${capname} = 'sgr0' # Turn off _all_ attribute modes.

function cecho ()
{
	local string="${1}"
	local color="${2}"

	echo "${color}${string}${clearedstyleandformatting}"
	return
} # color echo (João Cunha `joaocunha`) improved (Brandon Brown `brandonb927`) custom (by Karl Bertin `kvpb`)

echo ''
cecho '                   ^   |\ \ / | |  ^  | | |`` |`\  |  /`\ | /  |\' $red
cecho '                  ( )  |   X  |V| |-| | | |-  |<   |  |   |<   |' $red
cecho '               .   V  \|  / \ | | | |  V  |__ | \  |  \_/ | \ \|' $red
echo ''
cecho '                                 LICENSED BY' $red
cecho '                                 ${LICENSOR}' $red
echo ''
cecho "                            K K  V V  PPP  BB   '" $red
cecho '                           KK   V V  PPP  BBB     SS' $red
cecho '                          K K   V   P    BBB     SS' $red
echo ''
cecho '                 WARNING: USE THIS SCRIPT AT YOUR OWN RISK.' $red
echo ''
cecho " ALL THE COMPUTER PROGRAMS  AND SOFTWARE ARE PROVIDED 'AS IS'  WITHOUT WARRANTY" $red
cecho ' OF ANY KIND.  WE MAKE NO WARRANTIES,  EXPRESS  OR IMPLIED,  THAT THEY ARE FREE' $red
cecho ' OF ERROR,  OR ARE CONSISTENT  WITH ANY PARTICULAR STANDARD OF MERCHANTABILITY,' $red
cecho ' OR THAT THEY WILL MEET YOUR REQUIREMENTS FOR ANY PARTICULAR APPLICATION.  THEY' $red
cecho ' SHOULD NOT BE  RELIED ON FOR SOLVING A PROBLEM  WHOSE INCORRECT SOLUTION COULD' $red
cecho ' RESULT  IN  INJURY  TO  A  PERSON  OR  LOSS  OF  PROPERTY.  IF YOU DO USE THEM' $red
cecho ' IN SUCH A MANNER,  IT IS AT YOUR OWN RISK.  THE AUTHOR  AND PUBLISHER DISCLAIM' $red
cecho ' ALL LIABILITY FOR  DIRECT,  INDIRECT,  OR CONSEQUENTIAL DAMAGES RESULTING FROM' $red
cecho ' YOUR USE OF THE PROGRAMS.' $red
echo ''
# Display the title screen with the disclaimer.

sudo -v # Ask for an administrator password.
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null & # Update the sudo timestamp until the script is over.

osascript -e 'tell application "System Preferences" to quit' # Quit any System Preferences pane to prevent them from overriding this script.

cecho 'First-Party Settings: Systemwide And User-Specific Preferences' $yellow

echo 'Unnamed'

sudo defaults write /var/db/SystemPolicy-prefs.plist enabled -string NO
sudo spctl --master-disable
# Allow apps downloaded from anywhere. (Disable GateKeeper.)

chsh -s /bin/bash # Set BASH as login shell.

defaults write com.apple.LaunchServices LSQuarantine -bool FALSE # Do not warn when opening an application.

#sudo pmset standby 0
#sudo pmset autopoweroff 0
#sudo pmset -a hibernatemode 0
#sudo pmset -a autopoweroff 0
# Disable hibernation mode. [At first, it seemed to have fixed the sleep wake failure. However, after a few days, these crashes occurred again, just less frequently. I have never been able to identify or isolate the cause. Finally, once I could back up my data, I formatted the Fusion Drive, I reinstalled Yosemite from scratch, and the error never occurred ever again. Since the iMac stopped crashing, and because it didn't fix the problem, I'm commenting this out. By the way, I may have actually found the sole way to fix this goddamned error. Time will tell. Anyways, this is just one more reason to build a PC from that G5 case and move to a Linux distro. Apple has gone down the drain. Obviously, they aren't planning to get back on track, so let's not waste time waiting for them to do, you know, their job.]

sudo pmset -a disksleep 0 # Do not put hard disks to sleep when possible. (i) A trick for Apple computers without HDD.

#sudo pmset -a sms 0 # Disable the sudden motion sensor. (i) A trick for Apple laptops without HDD.

sudo systemsetup -setrestartfreeze on # Restart automatically if the computer freezes.

defaults write NSGlobalDomain AppleLanguages -array "en" "fr" # Set US english and FR french as preferred languages.
defaults write NSGlobalDomain AppleLocale -string "en_US@currency=EUR" # Set US english as format language and euro as currency.
defaults write NSGlobalDomain AppleMeasurementUnits -string "Centimeters" # Set centimeters as measurement unit.
defaults write NSGlobalDomain AppleMetricUnits -bool TRUE
# Set the language and text formats.

systemsetup -settimezone "Europe/Paris" > /dev/null # Set the timezone. (i) See `sudo systemsetup -listtimezones` for other values.

sudo systemsetup -setusingnetworktime on # Enable network time use.

sudo systemsetup -setnetworktimeserver "time.euro.apple.com" # Set network time server.

echo 'Directory Layout'

sudo ln -s /usr/libexec/PlistBuddy /usr/bin/PlistBuddy
sudo ln -s /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport /usr/bin/airport
sudo ln -s /System/Library/Frameworks/JavaScriptCore.framework/Versions/A/Resources/jsc /usr/bin/jsc
# Write system-wide custom symbolic links.

if [ -e "/Applications/{Directory Utility,Network Utility,Finder,Archive Utility}.app" ];
then
	mv /Applications/Directory\ Utility.app ${HOME}/.Trash/
	mv /Applications/Network\ Utility.app ${HOME}/.Trash/
	mv /Applications/Finder.app ${HOME}/.Trash/
	mv /Applications/Archive\ Utility.app ${HOME}/.Trash/
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Applications/Directory Utility.app") at (POSIX file "/Applications")'
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Applications/Network Utility.app") at (POSIX file "/Applications")'
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Finder.app") at (POSIX file "/Applications")'
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Applications/Archive Utility.app") at (POSIX file "/Applications")'
else
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Applications/Directory Utility.app") at (POSIX file "/Applications")'
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Applications/Network Utility.app") at (POSIX file "/Applications")'
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Finder.app") at (POSIX file "/Applications")'
	sudo osascript -e 'tell application "Finder" to make alias file to (POSIX file "/System/Library/CoreServices/Applications/Archive Utility.app") at (POSIX file "/Applications")'
fi
# Write system-wide custom aliases.

echo 'Network'

macmodelname=$(system_profiler SPHardwareDataType | grep "Model Name" | cut -c19-)
echo "What is your name?"
read userfullname
sudo scutil --set ComputerName "${userfullname}'s ${macmodelname}"
sudo scutil --set HostName "${userfullname}'s ${macmodelname}"
macmodelname2=$(echo ${macmodelname} | sed 's/ //')
sudo scutil --set LocalHostName "KVPBs${macmodelname2}"
sudo defaults write /Library/Preferences/SystemConfiguration/com.apple.smb.server NetBIOSName -string "${userfullname}'s ${macmodelname}"

echo 'Login Window & Screen Saver (NSGlobalDomain, com.apple.loginwindow, com.apple.HIToolbox.loginwindow, com.apple.screensaver)'

sudo defaults write /Library/Preferences/com.apple.loginwindow autoLoginUser "" # Disable automatic login.

sudo /usr/libexec/PlistBuddy -c "Add :AppleCurrentKeyboardLayoutInputSourceID string com.apple.keylayout.US" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleCurrentKeyboardLayoutInputSourceID com.apple.keylayout.US" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox dict" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Delete :com.apple.HIToolbox:AppleDefaultAsciiInputSource" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleDefaultAsciiInputSource array" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleDefaultAsciiInputSource:InputSourceKind string Keyboard\ Layout" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleDefaultAsciiInputSource:InputSourceKind Keyboard\ Layout" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleDefaultAsciiInputSource:KeyboardLayout\ ID integer ${keyboardlayoutid}" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleDefaultAsciiInputSource:KeyboardLayout\ ID ${keyboardlayoutid}" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleDefaultAsciiInputSource:KeyboardLayout\ Name string U.S." "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleDefaultAsciiInputSource:KeyboardLayout\ Name U.S." "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Delete :com.apple.HIToolbox:AppleEnabledInputSources" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleEnabledInputSources array" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleEnabledInputSources:0 dict" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleEnabledInputSources:0:InputSourceKind string Keyboard\ Layout" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleEnabledInputSources:0:InputSourceKind Keyboard\ Layout" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleEnabledInputSources:0:KeyboardLayout\ ID integer ${keyboardlayoutid}" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleEnabledInputSources:0:KeyboardLayout\ ID ${keyboardlayoutid}" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleEnabledInputSources:0:KeyboardLayout\ Name string U.S." "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleEnabledInputSources:0:KeyboardLayout\ Name U.S." "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Delete :com.apple.HIToolbox:AppleSelectedInputSources" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleSelectedInputSources array" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleSelectedInputSources:0 dict" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleSelectedInputSources:0:InputSourceKind string Keyboard\ Layout" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleSelectedInputSources:0:InputSourceKind Keyboard\ Layout" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleSelectedInputSources:0:KeyboardLayout\ ID integer ${keyboardlayoutid}" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleSelectedInputSources:0:KeyboardLayout\ ID ${keyboardlayoutid}" "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Add :com.apple.HIToolbox:AppleSelectedInputSources:0:KeyboardLayout\ Name string U.S." "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
sudo /usr/libexec/PlistBuddy -c "Set :com.apple.HIToolbox:AppleSelectedInputSources:0:KeyboardLayout\ Name U.S." "/var/tmp/com.apple.HIToolbox.loginwindow.plist"
# Add login window input keyboard layout, and set it to US.

sudo defaults write /Library/Preferences/com.apple.loginwindow showInputMenu -bool TRUE
#sudo defaults write /var/ard/Library/Preferences/com.apple.menuextra.textinput ModeNameVisible -bool TRUE
sudo chmod 777 /Library/Preferences/com.apple.loginwindow.plist
# Display Input keyboard layout menu in the login window.

sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName # Display IP address, hostname, OS version etc when clicking the clock in the login window.

#echo "What is the phone number with country code of the owner of this Mac?"
#echo "(E.g. '+33 6 XX XX XX XX' for french mobile phone numbers.)"
#read phonenumber
#echo "What is the email address of the owner of this Mac?"
#read emailaddress
#sudo defaults write /Library/Preferences/com.apple.loginwindow LoginwindowText "${userfullname}'s ${macmodelname}.\nPlease contact ${phonenumber} or ${emailaddress} if found."
# Set and display lock message. (i) userfullname and macmodelname variables have been set earlier, at Network: Computer name.
sudo defaults write /Library/Preferences/com.apple.loginwindow LoginwindowText "Karl V. P. Bertin's Mac${macmodelname}.\nPlease contact +33 6 70 83 26 64 and karlvp.bertin@gmail.com if found." # Display set lock message. (i) computername variable has been set earlier, at Network: Computer name.

defaults write com.apple.screensaver askForPassword -int 1
defaults write com.apple.screensaver askForPasswordDelay -int 0
# Require password immediately after sleep or screen saver begins. (Enable Require Password Immediately After Sleep Or Screen Saver Begins.)

echo 'Keyboard (NSGlobalDomain, com.apple.HIToolbox, com.apple.universalaccess)'

sudo /usr/libexec/PlistBuddy -c "Add :AppleCurrentKeyboardLayoutInputSourceID string com.apple.keylayout.US" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleCurrentKeyboardLayoutInputSourceID com.apple.keylayout.US" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Delete :AppleDefaultAsciiInputSource" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleDefaultAsciiInputSource:InputSourceKind string Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleDefaultAsciiInputSource:InputSourceKind Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleDefaultAsciiInputSource:KeyboardLayout\ ID integer 0" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleDefaultAsciiInputSource:KeyboardLayout\ ID 0" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleDefaultAsciiInputSource:KeyboardLayout\ Name string U.S." "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleDefaultAsciiInputSource:KeyboardLayout\ Name U.S." "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Delete :AppleEnabledInputSources" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0 dict" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0:InputSourceKind string Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleEnabledInputSources:0:InputSourceKind Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0:KeyboardLayout\ ID integer 0" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleEnabledInputSources:0:KeyboardLayout\ ID 0" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0:KeyboardLayout\ Name string U.S." "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleEnabledInputSources:0:KeyboardLayout\ U.S." "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Delete :AppleSelectedInputSources" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0 dict" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0:InputSourceKind string Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleSelectedInputSources:0:InputSourceKind Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0:KeyboardLayout\ ID integer 0" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleSelectedInputSources:0:KeyboardLayout\ ID 0" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0:KeyboardLayout\ Name string U.S." "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Set :AppleSelectedInputSources:0:KeyboardLayout\ Name U.S." "/Library/Preferences/com.apple.HIToolbox.plist"
sudo chown root:admin "/Library/Preferences/com.apple.HIToolbox.plist"
sudo chmod 644 "/Library/Preferences/com.apple.HIToolbox.plist"
# Add system input keyboard layout, and set it to US.
sudo /usr/libexec/PlistBuddy -c "Add :AppleCurrentKeyboardLayoutInputSourceID string com.apple.keylayout.UnicodeHexInput" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleDefaultAsciiInputSource:InputSourceKind string Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleDefaultAsciiInputSource:KeyboardLayout\ ID integer -1" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleDefaultAsciiInputSource:KeyboardLayout\ Name string Unicode\ Hex\ Input" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0 dict" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0:InputSourceKind string Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0:KeyboardLayout\ ID integer -1" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleEnabledInputSources:0:KeyboardLayout\ Name string Unicode\ Hex\ Input" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0 dict" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0:InputSourceKind string Keyboard\ Layout" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0:KeyboardLayout\ ID integer -1" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo /usr/libexec/PlistBuddy -c "Add :AppleSelectedInputSources:0:KeyboardLayout\ Name string Unicode\ Hex\ Input" "/Library/Preferences/com.apple.HIToolbox.plist"
sudo chown root:admin "/Library/Preferences/com.apple.HIToolbox.plist"
sudo chmod 644 "/Library/Preferences/com.apple.HIToolbox.plist"
# Add Unicode hex input system input keyboard layout.

defaults write NSGlobalDomain AppleKeyboardUIMode -int 3 # Enable full keyboard access for all controls.

defaults write -g NSUserKeyEquivalents '{Zoom = "@$m";}'
# Add Shift-Command-M 'Maximize window' keyboard app shortcut. [It doesn't work so well, e.g. in Chrome, it fully expands a window resized to 50% of the desktop's width to fill the desktop, but it doesn't just refit the window to Chrome's default size which is a bit larger.]

defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool FALSE # Disable press-and-hold for keys.
defaults write NSGlobalDomain InitialKeyRepeat -int 10 # Set even shorter key repeat triggering delay. /!\ ≤10: too fast; 0: NS SOM PARTY MN BRAV MYLOO (i) 15: GUI fastest
defaults write NSGlobalDomain KeyRepeat -int 0 # Set fastest key repeat rate. (Enable key repeat.)

defaults write com.apple.universalaccess closeViewScrollWheelToggle -bool TRUE
defaults write com.apple.universalaccess HIDScrollZoomModifierMask -int 262144
# Use scroll gesture with Strg (⌃) modifier key to zoom.
defaults write com.apple.universalaccess closeViewZoomFollowsFocus -bool TRUE # Follow the keyboard focus while zoomed in.

defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool FALSE # Disable automatic spell correction.

defaults write NSGlobalDomain NSAutomaticQuoteSubstitutionEnabled -bool FALSE
defaults write NSGlobalDomain NSAutomaticDashSubstitutionEnabled -bool FALSE
# Disable smart quotes and dashes; set smart double and single quotes to defaults.

defaults write ${HOME}/Library/Preferences/.GlobalPreferences.plist NSUserDictionaryReplacementItems -array \
                                                                                                            '{ on = 1; replace = "\\llrda"; with = "\U27fa"; }' \
                                                                                                            '{ on = 1; replace = "\\fa"; with = "\U2200"; }' \
                                                                                                            '{ on = 1; replace = "\\eo"; with = "\U2208"; }' \
                                                                                                            '{ on = 1; replace = "\\naeo"; with = "\U2209"; }' \
                                                                                                            '{ on = 1; replace = "\\N"; with = "\U2115"; }' \
                                                                                                            '{ on = 1; replace = "\\Z"; with = "\U2124"; }' \
                                                                                                            '{ on = 1; replace = "\\R"; with = "\U211d"; }' \
                                                                                                            '{ on = 1; replace = "\\C"; with = "\U2102"; }' \
                                                                                                            '{ on = 1; replace = "\\lamda"; with = "\U03bb"; }' \
                                                                                                            '{ on = 1; replace = "\\times"; with = "\U00d7"; }' \
                                                                                                            '{ on = 1; replace = "\\omega"; with = "\\U03c9"; }' \
                                                                                                            '{ on = 1; replace = "\\psi"; with = "\U03c8"; }' \
                                                                                                            '{ on = 1; replace = "\\chi"; with = "\U03c7"; }' \
                                                                                                            '{ on = 1; replace = "\\phi"; with = "\U03c6"; }' \
                                                                                                            '{ on = 1; replace = "\\upsilon"; with = "\U03c5"; }' \
                                                                                                            '{ on = 1; replace = "\\tau"; with = "\U03c4"; }' \
                                                                                                            '{ on = 1; replace = "\\sigma"; with = "\U03c3"; }' \
                                                                                                            '{ on = 1; replace = "\\rho"; with = "\U03c1"; }' \
                                                                                                            '{ on = 1; replace = "\\pi"; with = "\U03c0"; }' \
                                                                                                            '{ on = 1; replace = "\\omicron"; with = "\U03bf"; }' \
                                                                                                            '{ on = 1; replace = "\\zi"; with = "\U03be"; }' \
                                                                                                            '{ on = 1; replace = "\\nu"; with = "\U03bd"; }' \
                                                                                                            '{ on = 1; replace = "\\mu"; with = "\U03bc"; }' \
                                                                                                            '{ on = 1; replace = "\\kappa"; with = "\U03ba"; }' \
                                                                                                            '{ on = 1; replace = "\\iota"; with = "\U03b9"; }' \
                                                                                                            '{ on = 1; replace = "\\theta"; with = "\U03b8"; }' \
                                                                                                            '{ on = 1; replace = "\\eta"; with = "\U03b7"; }' \
                                                                                                            '{ on = 1; replace = "\\zeta"; with = "\U03b6"; }' \
                                                                                                            '{ on = 1; replace = "\\epsilon"; with = "\U03b5"; }' \
                                                                                                            '{ on = 1; replace = "\\delta"; with = "\U03b4"; }' \
                                                                                                            '{ on = 1; replace = "\\gamma"; with = "\U03b3"; }' \
                                                                                                            '{ on = 1; replace = "\\beta"; with = "\U03b2"; }' \
                                                                                                            '{ on = 1; replace = "\\alpha"; with = "\U03b1"; }'
# Set the text substitutions.

echo 'Mouse & Trackpad (NSGlobalDomain, com.apple.driver.AppleHIDMouse, com.apple.driver.AppleBluetoothMultitouch.trackpad, com.apple.dock)'

defaults write com.apple.driver.AppleHIDMouse.plist Button2 -int 2 # Enable mouse secondary click.

defaults -currentHost write NSGlobalDomain com.apple.trackpad.trackpadCornerClickBehaviour -int 1
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadRightClick -bool TRUE
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadCornerSecondaryClick -int 1
defaults -currentHost write NSGlobalDomain com.apple.trackpad.enableSecondaryClick -bool TRUE
# Enable trackpad secondary click, and set it as click or tap with two fingers. [Enter `defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadCornerSecondaryClick -int 2` to map bottom-right click to secondary click.]

defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool TRUE
defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
# Enable trackpad tap to click for current user and login screen.

defaults write NSGlobalDomain com.apple.mouse.scaling -int 3 # Set mouse tracking speed to fast. (i) 0: slow; 3: fast.
#defaults write NSGlobalDomain com.apple.scrollwheel.scaling -float 1.7 # Set mouse scroll wheel scrolling speed to fast. (i) 0: slow; 1.7: fast. /!\ seems to cause drag and drop in Finder to become slow to unresponsive.
#defaults write NSGlobalDomain com.apple.mouse.doubleClickThreshold -float 3.8625 # Set mouse double click needed speed to 75%. /!\ seems to cause drag and drop in Finder to become slow to unresponsive.

defaults write NSGlobalDomain com.apple.trackpad.scaling -int 3 # Set trackpad tracking speed to fast. (i) 0: slow; 3: fast.

defaults write NSGlobalDomain com.apple.swipescrolldirection -bool TRUE # Enable natural (OS X 10.7 Lion-style) scroll direction. (Enable System Preferences: TrackPad: Scroll & Zoom: Scroll Direction: natural.)

defaults write NSGlobalDomain AppleEnableSwipeNavigateWithScrolls -bool TRUE
defaults -currentHost write NSGlobalDomain com.apple.trackpad.threeFingerHorizSwipeGesture -int 0
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerHorizSwipeGesture -int 1
# Scroll left or right with two fingers to swipe between pages. (Enable System preferences: TrackPad: More gestures: Swipe between pages: Scroll left or right with two fingers.)

defaults write com.apple.dock showLaunchpadGestureEnabled -int 0 # Disable trackpad Launchpad gesture (pinch with thumb and three fingers).

echo "'Displays' & Display Server (NSGlobalDomain, com.apple.windowserver)"

sudo defaults write /Library/Preferences/com.apple.windowserver DisplayResolutionEnabled -bool TRUE # Enable Hi-DPI display modes. /!\ requires a restart.

defaults write NSGlobalDomain AppleFontSmoothing -int 2 # Enable medium subpixel font rendering on non-Apple LCD displays. (Enable Use LCD Font Smoothing When Available.)

echo "'Printers' (com.apple.print.PrintingPrefs)"

defaults write com.apple.print.PrintingPrefs "Quit When Finished" -bool TRUE # Automatically quit printer app when printing is over.

echo 'Wi-Fi'

networksetup -setairportpower en0 on # Enable Wi-Fi.

echo 'Bluetooth & Bluetooth Setup Assistant (com.apple.Bluetooth, com.apple.BluetoothAudioAgent)'

defaults write /Library/Preferences/com.apple.Bluetooth BluetoothAutoSeekKeyboard '1' # Launch Bluetooth setup assistant at startup if no keyboard is detected.

sudo defaults write /Library/Preferences/com.apple.Bluetooth BluetoothAutoSeekPointingDevice '1' # Launch Bluetooth setup assistant at startup if no mouse or trackpad is detected.

defaults write com.apple.BluetoothAudioAgent "Apple Bitpool Min (editable)" -int 40 # Improve overall bluetooth headphones or headsets sound quality.

osascript -e 'tell application "System Events" to tell process "SystemUIServer" to tell (menu bar item 1 of menu bar 1 whose description is "bluetooth") to {click, click (menu item 2 of menu 1)}' # Turn on Bluetooth.

echo 'Data Storage Devices'

sudo nvram boot-args="mbasd=1" # Enable the MacBook Air SuperDrive on any Mac.

echo 'Time Machine'

defaults write com.apple.TimeMachine DoNotOfferNewDisksForBackup -bool TRUE # Disable local Time Machine prompting to use new drives as backup volumes.

hash tmutil &> /dev/null && sudo tmutil disablelocal # Disable local Time Machine snapshots. (i) A trick for Apple laptops with SSD. [Enter `sudo tmutil enablelocal` to reenable local Time Machine snapshots.]

#sudo tmutil setdestination /Volumes/KVPBs

sudo tmutil enable # Turn on Time Machine.

echo 'UX, Aqua (GUI), SUI & VUI (NSGlobalDomain, com.apple.systempreferences, com.apple.CrashReporter, com.apple.helpviewer, com.apple.systemuiserver)'

defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool FALSE # Disable save to iCloud by default.

defaults write com.apple.systempreferences NSQuitAlwaysKeepsWindows -bool FALSE # Do not reopen windows when logging back in. (Disable resume on restart.) (Disable Reopen windows when logging back in (Resume).)

defaults write NSGlobalDomain NSDisableAutomaticTermination -bool TRUE # Disable automatic termination of inactive applications.

#defaults write com.apple.CrashReporter DialogType -string "none" # Disable the crash reporter.

defaults write com.apple.helpviewer DevMode -bool TRUE # Set Help viewer in non-floating mode.

/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user # Remove duplicates in Open with menu.

defaults write NSGlobalDomain NSWindowResizeTime -float 0.001 # Increase window resizing and fullscreen mode animation speed.

defaults -currentHost write com.apple.systemuiserver dontAutoLoad -array \
                                                                         "/System/Library/CoreServices/Menu Extras/Volume.menu" \
                                                                         "/System/Library/CoreServices/Menu Extras/User.menu"# \
#                                                                        "/System/Library/CoreServices/Menu Extras/UniversalAccess.menu"
# Hide volume and fast user switching menu bar items.
defaults write com.apple.systemuiserver menuExtras -array \
                                                          "/System/Library/CoreServices/Menu Extras/Bluetooth.menu" \
                                                          "/System/Library/CoreServices/Menu Extras/AirPort.menu" \
#                                                          "/System/Library/CoreServices/Menu Extras/Time Machine.menu" \
                                                          "/System/Library/CoreServices/Menu Extras/Script Menu.menu" \
                                                          "/System/Library/CoreServices/Menu Extras/Clock.menu" \
                                                          "/System/Library/CoreServices/Menu Extras/Battery.menu"
# Display Bluetooth, AirPort (Wi-Fi), Time Machine, AppleScript, clock and battery menu bar items.
defaults write com.apple.menuextra.clock IsAnalog -bool TRUE
defaults write com.apple.menuextra.battery ShowPercent -bool TRUE
# Display clock analog and battery as percentageless.

defaults write NSGlobalDomain NSTextShowsControlCharacters -bool TRUE # Display ASCII control characters using caret notation in plain text view.

defaults write NSGlobalDomain AppleICUForce12HourTime -bool FALSE # Set 24-hour time format. (Enable System Preferences: Date & Time: Clock: Time Options: Use a 24-hour clock.)

#defaults write NSGlobalDomain NSScrollAnimationEnabled -bool FALSE # Disable smooth scrolling. (i) A trick for old Mac that mess up the animation.

defaults write NSGlobalDomain AppleShowScrollBars -string "Automatic" # Display scroll bars automatically. [Other values are WhenScrolling and Always.]

defaults write com.apple.universalaccess reduceTransparency -bool FALSE # Set translucent menu bar (Enable Translucent Menu Bar.)

defaults write NSGlobalDomain AppleHighlightColor -string '1.000000 0.937255 0.690196' # Set Highlight color to OS X 10.10 Yosemite's yellow.

sudo nvram SystemAudioVolume=" " # Disable the startup sound. [Enter `sudo nvram -d SystemAudioVolume` to reenable the startup sound.]

echo 'Finder & AirDrop (NSGlobalDomain, com.apple.desktopservices, com.apple.finder, com.apple.frameworks.diskimages, com.apple.NetworkBrowser)'

defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE # Disable .DS_Store file writing on network volumes.

defaults write com.apple.NetworkBrowser BrowseAllInterfaces -bool TRUE # Enable AirDrop with Ethernet and on unsupported Mac running Mac OS X Lion. (i) introduced in Mac OS X 10.7 Lion.

defaults write com.apple.finder QuitMenuItem -bool TRUE # Enable Quit Finder  ⌘Q.

#defaults write com.apple.finder WarnOnEmptyTrash -bool FALSE # Disable the trash emptying warning.

defaults write com.apple.frameworks.diskimages skip-verify -bool TRUE
defaults write com.apple.frameworks.diskimages skip-verify-locked -bool TRUE
defaults write com.apple.frameworks.diskimages skip-verify-remote -bool TRUE
# Disable disk images verification.

defaults write com.apple.frameworks.diskimages auto-open-ro-root -bool TRUE
defaults write com.apple.frameworks.diskimages auto-open-rw-root -bool TRUE
defaults write com.apple.finder OpenWindowForNewRemovableDisk -bool TRUE
# Autoopen a new Finder window when a new volume is mounted.

defaults write com.apple.finder NewWindowTarget -string "PfLo"
defaults write com.apple.finder NewWindowTargetPath -string "file://${HOME}"
# Set home as new windows directory. [Use "PfDe" and "file://${HOME}/Desktop" for desktop or "PfLo" and "file:///path" for other paths.]

defaults write NSGlobalDomain com.apple.springing.enabled -bool TRUE # Enable spring loading for directories.
defaults write NSGlobalDomain com.apple.springing.delay -float 0 # Set spring loading delay to null.

defaults write com.apple.finder FXDefaultSearchScope -string "SCcf" # Set Finder search to search the current folder.

defaults write com.apple.finder FXArrangeGroupViewBy -string Kind # Sort files by kind.

defaults write com.apple.finder ShowStatusBar -bool TRUE # Display status bar.

defaults write com.apple.finder ShowPathbar -bool TRUE # Display path bar.

defaults write com.apple.finder _FXShowPosixPathInTitle -bool TRUE # Display full POSIX path as window title.

defaults write com.apple.finder FXInfoPanesExpanded -dict \
                                                          General -bool TRUE \
                                                          OpenWith -bool TRUE \
                                                          Privileges -bool TRUE
# Expand General, Open With and Sharing & Permissions file info panes by default.

defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool TRUE
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint -bool TRUE
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint2 -bool TRUE
# Expand the save pane by default.

rm -rf ${HOME}/Library/Application\ Support/Dock/desktoppicture.db && killall Dock
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(15,2,3)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(1,3,3)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(3,4,3)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(4,4,3)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(5,4,3)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(10,1,3)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(10,1,4)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(15,2,4)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(1,3,4)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(3,4,4)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(4,4,4)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(5,4,4)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(10,1,2)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(15,2,2)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(1,3,2)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(3,4,2)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(4,4,2)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(5,4,2)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(10,1,1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(15,2,1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(1,3,1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(3,4,1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(4,4,1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"preferences\" VALUES(5,4,1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"data\" VALUES('/Library/Desktop Pictures/Solid Colors')"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"data\" VALUES(1)"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"data\" VALUES('/System/Library/PreferencePanes/DesktopScreenEffectsPref.prefPane/Contents/Resources/DesktopPictures.prefPane/Contents/Resources/Transparent.tiff')"
sqlite3 ${HOME}/Library/Application\ Support/Dock/desktoppicture.db "INSERT INTO \"data\" VALUES(0.0)"
# Set the wallpaper.

defaults write com.apple.finder FXPreferredViewStyle -string "clmv" # Set the default view to the columns one. (i) Other viewing modes are icnv for icons, Nlsv for newlines and Flwv for Cover flow.

/usr/libexec/PlistBuddy -c "Set :DesktopViewSettings:IconViewSettings:showItemInfo TRUE" ${HOME}/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :FK_StandardViewSettings:IconViewSettings:showItemInfo TRUE" ${HOME}/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :StandardViewSettings:IconViewSettings:showItemInfo TRUE" ${HOME}/Library/Preferences/com.apple.finder.plist
# Show item info near icons on the desktop and in other icon views.

/usr/libexec/PlistBuddy -c "Set DesktopViewSettings:IconViewSettings:labelOnBottom FALSE" ${HOME}/Library/Preferences/com.apple.finder.plist # Display desktop items infos to their icons' right.

defaults write com.apple.finder ShowHardDrivesOnDesktop -bool TRUE # Display internal drives on the desktop. (Enable Hard Disks.)

defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool TRUE # Display external drives on the desktop. (Enable External Disks.)

defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool TRUE # Display removable media (CD, DVD and iPod) on the desktop. (Enable CD, DVD and iPod.)

defaults write com.apple.finder ShowMountedServersOnDesktop -bool TRUE # Display mounted servers on the desktop. (Enable Connected Servers.)

defaults write NSGlobalDomain AppleShowAllExtensions -bool TRUE # Show all filename extensions. (Enable Show All Filename Extensions.)

defaults write com.apple.finder AppleShowAllFiles -bool TRUE # Display hidden files.

defaults write com.apple.finder DisableAllAnimations -bool TRUE # Disable Finder window & Get Info pane animations.

echo 'Spotlight (com.apple.Spotlight)'

defaults write com.apple.Spotlight orderedItems -array \
                                                       '{"enabled" = 1;"name" = "APPLICATIONS";}' \
                                                       '{"enabled" = 0;"name" = "SYSTEM_PREFS";}' \
                                                       '{"enabled" = 0;"name" = "DOCUMENTS";}' \
                                                       '{"enabled" = 0;"name" = "DIRECTORIES";}' \
                                                       '{"enabled" = 0;"name" = "PRESENTATIONS";}' \
                                                       '{"enabled" = 0;"name" = "SPREADSHEETS";}' \
                                                       '{"enabled" = 0;"name" = "PDF";}' \
                                                       '{"enabled" = 0;"name" = "MESSAGES";}' \
                                                       '{"enabled" = 1;"name" = "CONTACT";}' \
                                                       '{"enabled" = 0;"name" = "EVENT_TODO";}' \
                                                       '{"enabled" = 0;"name" = "IMAGES";}' \
                                                       '{"enabled" = 0;"name" = "BOOKMARKS";}' \
                                                       '{"enabled" = 0;"name" = "MUSIC";}' \
                                                       '{"enabled" = 0;"name" = "MOVIES";}' \
                                                       '{"enabled" = 0;"name" = "FONTS";}' \
                                                       '{"enabled" = 0;"name" = "SOURCE";}' \
# Change indexing order, and set search results.
killall mds > /dev/null 2>&1 # Load new settings before rebuilding the index.
sudo mdutil -i on / > /dev/null # Ensure indexing is enabled for the main volume.
sudo mdutil -E / > /dev/null # Rebuild index from scratch.

sudo defaults write /.Spotlight-V100/VolumeConfiguration Exclusions -array "/Volumes" # Disable Spotlight indexing for never indexed mounted volumes.

plutil -convert binary1 ${HOME}/.files/Library/Application\ Support/com.apple.spotlight.Shortcuts.plist -o ${HOME}/Library/Application\ Support/com.apple.spotlight.Shortcuts # Set Top Hits.

#sudo chmod 600 /System/Library/CoreServices/Search.bundle/Contents/MacOS/Search # Disable Spotlight menu bar icon.

echo "'Screenshooter' (com.apple.screencapture)"

defaults write com.apple.screencapture type -string 'png' # Set the screenshot format to PNG. [Other options are bmp for Windows Bitmap, gif for GIF, jpg for JPEG, jp2 for JPEG2000, tif for TIFF, pict for Macintosh PICT and tga for TARGA.]

defaults write com.apple.screencapture name -string 'Screenshot' # Set screenshot filename to 'Screenshot ${YYYY}-${MM}-${DD} at ${h}.${mn}.${s}.${ext}'. [default option: 'Screen Shot'; custom options: '', and '\b' lead to a whitespace at the beginning of the filename that the latter cannot erase.]

#defaults write com.apple.screencapture include-date -bool FALSE # Disable date in screenshot filename.

#defaults write com.apple.screencapture location -string "${HOME}/Desktop" # Set screenshot writing location to Desktop/.

#defaults write com.apple.screencapture disable-shadow -bool TRUE # Disable shadows in screenshots.

echo 'QuickLook (com.apple.finder)'

#echo -n "0x08000100:0x0" > ${HOME}/.CFUserTextEncoding # Fix the UTF-8 bug of QuickLook. /!\ causes issues with Adobe Illustrator CS5.

defaults write com.apple.finder QLEnableTextSelection -bool TRUE # Enable text selection in QuickLook.

echo 'Dock (com.apple.dock)'

#defaults write com.apple.dock single-app -bool FALSE # Disable Single app mode.

defaults write com.apple.dock minimize-to-application -bool TRUE # Enable window's title bar double-clicking to minimize.

defaults write com.apple.dock enable-spring-load-actions-on-all-items -bool TRUE # Enable spring loading for all items.

defaults write com.apple.dock scroll-to-open -bool TRUE # Enable scroll gestures.

defaults write com.apple.dock mouse-over-hilite-stack -bool TRUE # Enable highlight when hovering for the grid view of a stack.

defaults write com.apple.dock show-process-indicators -bool TRUE # Display indicator lights for open applications.

defaults write com.apple.dock showhidden -bool TRUE # Enable translucent items for hidden apps.

defaults write com.apple.dock pinning -string start # Set position to the left or top.

defaults write com.apple.dock orientation left # Set alignment to the left or top.

defaults write com.apple.dock persistent-apps -array
defaults write com.apple.dock persistent-others -array
# Delete Dock items.

defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Firefox.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Firefox app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/iTerm.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create an iTerm2 app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VMware Fusion.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a WMware Fusion app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Server.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Server app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/iTunes.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create an iTunes app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Utilities/Activity Monitor.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create an Activity Monitor app item.
#defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create a spacer item.
defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Stickies.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>' # Create a Stickies app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/TextEdit.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a TextEdit app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Microsoft Office 2011/Microsoft Word.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Word app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Microsoft Office 2011/Microsoft Excel.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create an Excel app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Adobe Photoshop CS6/Adobe Photoshop CS6.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Photoshop CS6 app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Pixelmator.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Pixelmator app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/GIMP-2.10.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a GIMP app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Adobe Lightroom/Adobe Lightroom.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Photoshop Lightroom app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Adobe Illustrator CS6/Adobe Illustrator CS6.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create an Illustrator CS6 app item.
#defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Sketch.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>' # Create a Sketch app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Inkscape.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create an Inscape app item.
#defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create a spacer item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Preview.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Preview app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VLC.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a VLC Media Player app item.
#defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create a spacer item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Calendar.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Calendar app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Contacts.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Contacts app item.
#defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create a spacer item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/ProtonMail Bridge.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a ProtonMail Bridge app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Mail.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Mail app item.
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Signal.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Signal app item.
#defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create a spacer item.
#defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Utilities/AppleScript Editor.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>' # Create an AppleScript Editor app item. (i) AppleScript Editor is named Script Editor from OS X Yosemite onwards.
#defaults write com.apple.dock persistent-apps -array-add '<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Xcode.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>' # Create a Xcode app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Jumpcut.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Jumpcut app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/SizeUp.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a SizeUp app item.
#defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Dropbox.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>" # Create a Dropbox app item.
#defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create a spacer item.
defaults write com.apple.dock persistent-others -array-add '{ "tile-data" = { "list-type" = 1; }; "tile-type" = "recents-tile"; }' # Create a recent items stack others item.
defaults write com.apple.dock persistent-others -array-add "<dict><key>tile-data</key><dict><key>arrangement</key><integer>1</integer><key>displayas</key><integer>1</integer><key>file-data</key><dict><key>_CFURLString</key><string>file:///Applications/</string><key>_CFURLStringType</key><integer>15</integer></dict><key>file-label</key><string>Applications</string><key>file-type</key><integer>2</integer><key>preferreditemsize</key><integer>-1</integer><key>showas</key><integer>2</integer></dict><key>tile-type</key><string>directory-tile</string></dict>" # Create an Applications others item.
defaults write com.apple.dock persistent-others -array-add "<dict><key>tile-data</key><dict><key>arrangement</key><integer>2</integer><key>displayas</key><integer>1</integer><key>file-data</key><dict><key>_CFURLString</key><string>file:///Users/kvpb/Downloads/</string><key>_CFURLStringType</key><integer>15</integer></dict><key>file-label</key><string>Downloads</string><key>file-type</key><integer>2</integer><key>preferreditemsize</key><integer>-1</integer><key>showas</key><integer>2</integer></dict><key>tile-type</key><string>directory-tile</string></dict>" # Create a Downloads others item.
#defaults write com.apple.dock persistent-others -array-add "<dict><key>tile-data</key><dict><key>arrangement</key><integer>5</integer><key>displayas</key><integer>1</integer><key>file-data</key><dict><key>_CFURLString</key><string>file:///Users/kvpb/Dropbox/</string><key>_CFURLStringType</key><integer>15</integer></dict><key>file-label</key><string>Dropbox</string><key>file-type</key><integer>2</integer><key>preferreditemsize</key><integer>-1</integer><key>showas</key><integer>2</integer></dict><key>tile-type</key><string>directory-tile</string></dict>"#defaults write com.apple.dock persistent-others -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Users/kvpb/misc</string><key>_CFURLStringType</key><integer>0</integer></dict><key>file-label</key><string>Miscellaneous</string><key>file-type</key><integer>18</integer></dict><key>tile-type</key><string>directory-tile</string></dict>" # Create a Dropbox others item.
defaults delete com.apple.dock mod-count
defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create an app item area spacer item.
#defaults write com.apple.dock persistent-others -array-add '{tile-data={}; tile-type="spacer-tile";}' # Create an other items area spacer item.

defaults write com.apple.dock mineffect -string "scale" # Set window minimaximazation effect to scale. [Do not set to hidden 'suck' which, y'know, sucks.]

defaults write com.apple.dock hide-mirror -bool TRUE # Disable mirror effect.

defaults write com.apple.dock no-glass -bool YES # Disable glass effect.

defaults write com.apple.dock launchanim -bool FALSE # Disable opening applications animation.

defaults write com.apple.dock autohide -bool TRUE # Enable autohiding.
defaults write com.apple.dock autohide-delay -float 0
defaults write com.apple.dock autohide-time-modifier -float 0
# Speed autohiding animation up.

echo 'Mission Control (com.apple.dock)' # (i) has been substituted for Exposé.

defaults write com.apple.dock mru-spaces -bool FALSE # Disable automatic spaces rearranging based on most recent use.

#defaults write com.apple.dock expose-group-by-app -bool FALSE # Do not group windows by application. (Set the behavior of Mission Control behavior to that of Exposé.) (Disable Group Windows By Application.)

defaults write com.apple.dock expose-animation-duration -float 0.1 # Speed animations up.

echo 'Dashboard (com.apple.dock, com.apple.dashboard)'

defaults write com.apple.dock dashboard-in-overlay -bool TRUE # Hide dashboard as a space.

defaults write com.apple.dashboard mcx-disabled -bool TRUE # Disable the dashboard.

#defaults write com.apple.dashboard devmode -bool TRUE # Enable dashboard dev mode. (i) allows to keep widgets on the desktop.

echo 'Launchpad (com.apple.dock)'

defaults write com.apple.dock ResetLaunchPad -bool TRUE # Reset Launchpad organization to defaults.

sudo ln -sf "/Applications/Xcode.app/Contents/Developer/Applications/iOS Simulator.app" "/Applications/iOS Simulator.app" # Add iOS simulator to Launchpad.

defaults write com.apple.dock showLaunchpadGestureEnabled -int 0 # Disable the pinch-with-thumb-and-three-fingers trackpad gesture. (Launchpad: Trackpad -> System preferences: TrackPad: More gestures.)

#echo 'Notification Center'
#
#launchctl unload -w /System/Library/LaunchAgents/com.apple.notificationcenterui.plist 2> /dev/null # Disable the notification center, and remove its menu bar item. (i) 'fixed' by Apple on macOS 10.13 High Sierra. [But hey, 'It's not a bug; it's a feature'.]

echo 'Software Update & App Store (com.apple.SoftwareUpdate, com.apple.commerce, com.apple.appstore)'

defaults write com.apple.SoftwareUpdate AutomaticCheckEnabled -bool TRUE # Enable the automatic update check.

defaults write com.apple.SoftwareUpdate ScheduleFrequency -int 1 # Set software updates check frequency to daily.

defaults write com.apple.SoftwareUpdate AutomaticDownload -int 0 # Disable available updates background automatic download.

defaults write com.apple.SoftwareUpdate CriticalUpdateInstall -int 0 # Disable system data files and security updates automatic installation.

defaults write com.apple.SoftwareUpdate ConfigDataInstall -int 0 # Disable automatic download of apps purchased on other Apple computers.

defaults write com.apple.commerce AutoUpdate -bool FALSE # Disable app autoupdate.

defaults write com.apple.commerce AutoUpdateRestartRequired -bool TRUE # Block the App store to reboot the machine on OS X updates.

defaults write com.apple.appstore ShowDebugMenu -bool TRUE # Enable the App store's debug menu.
defaults write com.apple.appstore WebKitDeveloperExtras -bool TRUE # Enable the App store's WebKit dev tools.

#echo 'Xcode'

#xcode-select --install
#xcodebuild -license accept
# Install Xcode and accept the Xcode EULA.

echo 'Terminal & X11 (com.apple.terminal, org.x.X11, com.apple.x11)'

defaults write com.apple.terminal StringEncodings -array 4 # Set Terminal encoding to UTF-8.

defaults write com.apple.terminal ApplePressAndHoldEnabled -bool FALSE # Disable Terminal press-and-hold for keys.

defaults write com.apple.terminal SecureKeyboardEntry -bool TRUE # Enable Terminal secure keyboard entry.

defaults write com.apple.terminal FocusFollowsMouse -bool TRUE
defaults write com.apple.x11 wm_ffm -bool TRUE # [Enter `defaults write org.x.X11 wm_ffm -bool TRUE` for Mac OS X Snow Leopard.]
# Enable focus follows mouse (point-to-focus) for Terminal and X11 apps.

defaults write com.apple.terminal StartAtLogin -bool TRUE # Launch Terminal at startup.

echo 'TextEdit (com.apple.TextEdit, com.apple.LaunchServices)'

defaults write com.apple.TextEdit NSUserKeyEquivalents \
'{ \
	"\033Edit\033Transformations\033Capitalize" = "@~$u"; \
	"\033Edit\033Transformations\033Make Lower Case" = "@$l"; \
	"\033Edit\033Transformations\033Make Upper Case" = "@$u"; \
	"\033Format\033Font\033Baseline\033Subscript" = "@~$-"; \
	"\033Format\033Font\033Baseline\033Superscript" = "@$6"; \
	Justify = "@~$["; \
}';
# Add TextEdit keyboard app shortcuts:
# 	-  Alt-Shift-U 'Capitalize'
# 	-  Shift-L 'Make Lower Case'
# 	-  Shift-U 'Make Upper Case'
# 	-  Shift-Command-6 (Command-^ on US Mac keyboard layout) 'Superscript'
# 	-  Shift-Command-- (Command-_ on US Mac keyboard layout) 'Subscript'
# 	-  Alt-Shift-Command-[ (Option-Command-{ on US Mac keyboard layout) 'Justify'

defaults write com.apple.TextEdit ShowRuler -bool FALSE # Show ruler.
defaults write com.apple.TextEdit SmartCopyPaste -bool FALSE # Disable smart copypaste.
defaults write com.apple.TextEdit SmartQuotes -bool FALSE # Disable smart quotes.
defaults write com.apple.TextEdit SmartDashes -bool FALSE # Disable smart dashes.
defaults write com.apple.TextEdit SmartLinks -bool FALSE # Disable smart links.
defaults write com.apple.TextEdit TextReplacement -bool FALSE # Disable text replacement.
defaults write com.apple.TextEdit CorrectSpellingAutomatically -bool FALSE # Disable Correct spelling automatically.
defaults write com.apple.TextEdit CheckSpellingWhileTyping -bool FALSE # Do not check spelling as you type.
defaults write com.apple.TextEdit CheckGrammarWithSpelling -bool FALSE # Do not check grammar with spelling.
defaults write com.apple.TextEdit DataDetectors -bool FALSE # Disable data detectors.

defaults write com.apple.TextEdit PlainTextEncoding -int 4 # Set UTF-8 as plain text file opening encoding. (Set TextEdit: Preferences: Open and save: Plain text encoding: Opening files to Unicode (UTF-8).)
defaults write com.apple.TextEdit PlainTextEncodingForWrite -int 4 # Set UTF-8 as plain text file saving encoding. (Set TextEdit: Preferences: Open and save: Plain text encoding: Saving files to Unicode (UTF-8).)

defaults write com.apple.TextEdit NSFixedPitchFont -string "Menlo-Regular"
defaults write com.apple.TextEdit NSFixedPitchFontSize -int "10"
# Set Apple Menlo 10pt as plain text font. (i) Apple Menlo 10pt is the default fixed-width font of OS X.
defaults write com.apple.TextEdit NSFont -string "Times-Roman"
defaults write com.apple.TextEdit NSFontSize -int "12"
# Set rich text font to Linotype Times Roman 12pt.

defaults write com.apple.TextEdit RichText -int 0 # Set plain text as new document text format.
defaults write com.apple.TextEdit ShowPageBreaks -bool TRUE # Do not wrap to page.
defaults write com.apple.TextEdit WidthInChars -int 80 # Set new document window width to 80 characters (or columns).
defaults write com.apple.TextEdit HeightInChars -int 24 # Set new document window height to 24 characters (or lines).
defaults write com.apple.TextEdit TabWidth -int 4 # Set tab width to 4 chars.
defaults write com.apple.TextEdit AddExtensionToNewPlainTextFiles -bool FALSE # Do not add .txt extension plain text files at save. (Disable Add '.txt' extension to plain text files.)

defaults write com.apple.TextEdit author -string "Karl V. P. Bertin" # Set new document author name to KVPB's.
defaults write com.apple.TextEdit company -string "" # Set new document company name.
defaults write com.apple.TextEdit copyright -string "" # Set new document copyright.

defaults write com.apple.TextEdit IgnoreHTML -bool TRUE # Display HTML files as code. (Enable Display HTML files as HTML code instead of formatted text.)
defaults write com.apple.TextEdit IgnoreRichText -bool FALSE # Display RTF files as formatted text. (Disable Display RTF files as RTF code instead of formatted text.)

defaults write com.apple.TextEdit HTMLEncoding -int 20 # Set UTF-8 as HTML file encoding. (Set TextEdit: Preferences: Open And Save: HTML Saving Options: Encoding to Unicode (UTF-8).)
defaults write com.apple.TextEdit UseXHTMLDocType -bool FALSE
defaults write com.apple.TextEdit UseTransitionalDocType -bool TRUE
# Set new HTML document type to HTML 4.01 transitional. [Both are crossed attributes, e.g. enter `UseXHTMLDocType -bool FALSE` and `UseTransitionalDocType -bool FALSE` to set document type to HTML 4.01 strict.]
defaults write com.apple.TextEdit UseEmbeddedCSS -bool FALSE
defaults write com.apple.TextEdit UseInlineCSS -bool FALSE
# Set new HTML document styling to embedded CSS. [Both are crossed attributes, e.g. enter `UseEmbeddedCSS -bool FALSE` and `UseInlineCSS -bool FALSE` to set styling to no CSS.]

defaults write com.apple.TextEdit PreserveWhitespace -bool TRUE # Preserve white space.

#defaults write com.apple.LaunchServices LSHandlers -array-add '{LSHandlerContentType=org.openxmlformats.wordprocessingml.document;LSHandlerRoleAll=com.apple.textedit;}'
# Set TextEdit as default Office Open XML Document editor.

echo 'Disk Utility (com.apple.DiskUtility)'

defaults write com.apple.DiskUtility DUDebugMenuEnabled -bool TRUE
defaults write com.apple.DiskUtility advanced-image-options -bool TRUE
# Enable the debug menu.

echo 'Activity Monitor (com.apple.ActivityMonitor)'

defaults write com.apple.ActivityMonitor OpenMainWindow -bool TRUE # Display the main window when launching.

defaults write com.apple.ActivityMonitor ShowCategory -int 0 # Display all processes.

defaults write com.apple.ActivityMonitor SortColumn -string "CPUUsage"
defaults write com.apple.ActivityMonitor SortDirection -int 0
# Display results sorted by CPU usage.

defaults write com.apple.ActivityMonitor IconType -int 5 # Display CPU usage icon in the Dock.

echo 'Safari & WebKit (com.apple.Safari)' # [This section has been the first example of how I want such scripts to configure OS: in case of emergency on a clean install, what is needed the most is set first.]

defaults write com.apple.Safari WebKitTabToLinksPreferenceKey -bool TRUE
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2TabsToLinks -bool TRUE
# Bind Tab to highlight webpage items. (Enable Press Tab to highlight each item on a webpage.)
defaults write com.apple.Safari CommandClickMakesTabs -int 1 # Bind command-right click to open links in new tabs. (Enable ⌘-click opens a link in a new tab.)

defaults write com.apple.Safari WebKitDefaultTextEncodingName -string "utf-8" # Set UTF-8 as default encoding. (Set Default Encoding to Unicode (UTF-8).)
defaults write com.apple.Safari HistoryAgeInDaysLimit -int 2147483647 # Remove history items after Int32. ('Disable' history automatic removal.) (Set Remove History Items to After Int32.)
defaults write com.apple.Safari LocalFileRestrictionsEnabled -bool TRUE # Disable local files access. (Disable Disable Local File Restrictions.)
defaults write com.apple.Safari WarnAboutFraudulentWebsites -bool TRUE # Warn when visiting a fraudulent website.

defaults write com.apple.Safari WebKitDeveloperExtrasEnabledPreferenceKey -bool TRUE
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2DeveloperExtrasEnabled -bool TRUE
# Enable the web inspector.

defaults write com.apple.Safari WebKitMinimumFontSize -int 0
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2MinimumFontSize -int 0
# Never use font sizes smaller than 9. (Enable Never use font sizes smaller than N.) (Set Never use font sizes smaller than to 9.)
defaults write com.apple.Safari UserStyleSheetEnabled -int 0 # Set Style sheet to None selected.

defaults write com.apple.Safari DownloadsPath -string "${HOME}/Downloads" # Set ${HOME}/Downloads/ as downloads storage path. (Set Save Downloaded Files to To Downloads/.)
defaults write com.apple.Safari AutoOpenSafeDownloads -bool FALSE # Do not open 'safe' files after downloading. (Disable Open “Safe” Files After Downloading.)

defaults write com.apple.Safari HomePage -string "https://www.perdu.com" # Set homepage URL to about:blank.
defaults write com.apple.Safari NewWindowBehavior -int 0 # New windows open with homepage. (Set New windows open with to Homepage.)
defaults write com.apple.Safari NewTabBehavior -int 0 # New tabs open with homepage. (Set New tabs open with to Homepage.)

defaults write com.apple.Safari AlwaysRestoreSessionAtLaunch -bool TRUE # Safari opens with all windows from last session. (Enable Safari sessions restoration at launch.) (Set Safari opens with to All windows from last session.)
defaults write com.apple.Safari OpenNewTabsInFront -bool FALSE # Do not make a new tab or window active when it opens. (Disable new tabs automatic activation.) ['Activation' is when a window is brought to foreground.]
defaults write com.apple.Safari TabCreationPolicy -int 1 # Automatically open pages in tabs instead of windows. (Set pages to automatically open in tabs instead of windows.) (Set Open pages in tabs instead of windows to Automatically.)

defaults write com.apple.Safari WebKitJavaScriptCanOpenWindowsAutomatically -bool FALSE
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2JavaScriptCanOpenWindowsAutomatically -bool FALSE
# Block popup windows.

defaults write com.apple.Safari WebKitStorageBlockingPolicy -int 1
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2StorageBlockingPolicy -int 1
# Block cookies and other website data from third parties and advertisers. (Set Block cookies and other website data to From third parties and advertisers.)

defaults write com.apple.Safari SafariGeolocationPermissionPolicy -int 0 # Deny without prompting website use of location services. ('Disable' location services access.) (Set Limit website access to location services to Deny without prompting.)
defaults write com.apple.Safari SuppressSearchSuggestions -bool TRUE # Prevent search engine from providing suggestions. (Block search engines suggestions providing.) (Enable Prevent search engine from providing suggestions.)
defaults write com.apple.Safari PreloadTopHit -bool FALSE # Do not preload Top hit in the background. (Disable top hit preloading.) (Enable Do not preload Top hit in the background.)
defaults write com.apple.Safari SendDoNotTrackHTTPHeader -bool TRUE # Ask websites not to track me. (Enable Do not track.) (Enable Ask websites not to track me.)

defaults write com.apple.Safari CanPromptForPushNotifications -bool FALSE # Do not allow websites to ask for permission to send push notifications. ('Disable' push notifications for websites.) (Disable Allow websites to ask for permission to send push notifications.)

defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2PlugInSnapshottingEnabled -bool FALSE # Stop plug-ins to save power. (Enable Stop plugins to save power.)
defaults write com.apple.Safari WebKitPluginsEnabled -bool FALSE
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2PluginsEnabled -bool FALSE
# Disable plugins.

defaults write com.apple.Safari WebKitJavaEnabled -bool FALSE
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2JavaEnabled -bool FALSE
# Disable Java.

defaults write com.apple.Safari WebKitJavaScriptEnabled -bool TRUE
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2JavaScriptEnabled -bool TRUE
# Enable JavaScript.

defaults write com.apple.Safari ExtensionsEnabled -bool FALSE # Enable Safari extensions. (Enable Extensions.)
defaults write com.apple.Safari InstallExtensionUpdatesAutomatically -bool TRUE # Install updates automatically. (Enable automatic extensions updates.) (Enable Install updates automatically.)

defaults write com.apple.Safari AutoFillPasswords -bool FALSE # Do not AutoFill using names and passwords. (Disable AutoFill user names and passwords.)
defaults write com.apple.Safari AutoFillCreditCardData -bool FALSE # Do not AutoFill credit cards. (Disable Credit cards.)
defaults write com.apple.Safari AutoFillFromAddressBook -bool FALSE # Do not AutoFill using info from my Contacts card. (Disable Using info from my Contacts card.)
defaults write com.apple.Safari AutoFillMiscellaneousForms -bool FALSE # Do not AutoFill other forms. (Disable Other forms.)
# Do not AutoFill web forms. (Disable AutoFill.)

defaults write com.apple.Safari IncludeDevelopMenu -bool TRUE # Show Develop menu in menu bar. (Display develop menu in the menu bar.) (Enable Show Develop menu in menu bar.)
defaults write com.apple.Safari ShowStatusBar -bool TRUE # Show status bar  ⌘/. (Display the status bar.) (Enable Show status bar  ⌘/.)

defaults write com.apple.Safari BookmarksMenuIncludesRendezvous -bool FALSE # Disable bookmarks Bonjour menu.
defaults write com.apple.Safari ProxiesInBookmarksBar "()" # Clear favorite bookmarks bar. (Remove Reading list and Top sites from the bookmarks bar.)
defaults write com.apple.Safari ShowFavoritesBar -bool FALSE # Hide favorite bookmarks bar. (Hide Favorites bar  ⇧⌘B.)

defaults write com.apple.Safari SidebarViewModeIdentifier -string "Bookmarks" # Display bookmarks sidebar.
defaults write com.apple.Safari ShowSidebarInNewWindows -bool FALSE # Hide sidebar in new windows.

defaults write com.apple.Safari TopSitesGridArrangement -int 0 # Top Sites shows 6 sites. (Display as few top sites as possible.) (Set Top sites shows to 6 sites.)

echo 'Mail (com.apple.mail)'

defaults write com.apple.mail DisableInlineAttachmentViewing -bool TRUE # Disable inline attachments. (Only show the icons.)

defaults write com.apple.mail AddressesIncludeNameOnPasteboard -bool FALSE # Copy email addresses as ${firstname}.${lastname}@${domain}.${sx} instead of '${Firstname} ${Lastname} <${firstname}.${lastname}@${domain}.${sx}>'. (i) Disable Use smart addresses.

defaults write com.apple.mail DraftsViewerAttributes -dict-add "DisplayInThreadedMode" -string "YES"
defaults write com.apple.mail DraftsViewerAttributes -dict-add "SortedAscending" -string "YES"
defaults write com.apple.mail DraftsViewerAttributes -dict-add "SortOrder" -string "received-date"
# Show most recent message at the top. (Display emails in threaded mode, and sort them as newest at the top.) (Enable Show most recent message at the top.)

defaults write com.apple.mail SpellCheckingBehavior -string "NoSpellCheckingEnabled" # Never check spelling. (Set Check Spelling to Never.) (Disable automatic spell checking.)

echo 'Calendar (com.apple.iCal)' # (i) was formerly iCal.

defaults write com.apple.iCal "scroll by weeks in week view" -int 2 # Scroll in week view by week, stop on today. (Set Scroll in week view by to Week, stop on today.)

defaults write com.apple.iCal "first day of week" -int 1 # Set week start to monday.

defaults write com.apple.iCal "Show Week Numbers" -bool TRUE # Display week numbers. (i) introduced in OS X 10.8 Mountain Lion.

defaults write com.apple.iCal "Show time in Month View" -bool TRUE # Display events time in month view.

defaults write com.apple.iCal "n days of week" -int 7 # Display 7 days.

echo 'Contacts (com.apple.addressbook)' # (i) formerly named Address Book.

echo 'Messages (com.apple.messageshelper.MessageController)'

defaults write com.apple.messageshelper.MessageController SOInputLineSettings -dict-add "automaticEmojiSubstitutionEnablediMessage" -bool FALSE # Disable automatic emoji substitution.
defaults write com.apple.messageshelper.MessageController SOInputLineSettings -dict-add "automaticQuoteSubstitutionEnabled" -bool FALSE # Disable smart quotes.

defaults write com.apple.messageshelper.MessageController SOInputLineSettings -dict-add "continuousSpellCheckingEnabled" -bool FALSE # Disable continuous spell checking.

cecho 'Second-Party Settings: User-Specific Filesystem Customs' $yellow

#git clone git:github.com/kvpb/.files.git ${HOME}/.files
# Clone my .files/ from my GitHub remote repo to ${HOME}/.

if [ -d "${HOME}/{Miscellaneous,Work}" ]
then
	if [ -L "${HOME}/{Miscellaneous,Work}" ]
	then
		mv ${HOME}/{Miscellaneous,Work} ${HOME}/.Trash/
		open -R ${HOME}/.Trash
		mkdir ${HOME}/{Miscellaneous,Work}
	fi
else
	mkdir -p ${HOME}/{Miscellaneous,Work}
fi
# If Miscellaneous and Work aren't directories in ${HOME}/, then substitute symbolic links by or add these directories.
if [ -d "${HOME}/Downloads/{Documents,Pictures,Music,Movies,Miscellaneous}" ]
then
	if [ -L "${HOME}/Downloads/{Documents,Pictures,Music,Movies,Miscellaneous}" ]
	then
		mv ${HOME}/Downloads/{Documents,Pictures,Music,Movies,Miscellaneous} ${HOME}/.Trash/
		open -R ${HOME}/.Trash
		mkdir ${HOME}/Downloads/{Documents,Pictures,Music,Movies,Miscellaneous}
	fi
else
	mkdir -p ${HOME}/Downloads/{Documents,Pictures,Music,Movies,Miscellaneous}
fi
# If Documents, Pictures, Music, Movies and Miscellaneous aren't directories in ${HOME}/Downloads/, then substitute symbolic links by or add these directories.
if [ -d "${HOME}/{DCIM,FCIM,Camera}" ]
then
	if [ -L "${HOME}/{DCIM,FCIM,Camera}" ]
	then
		mv ${HOME}/{DCIM,FCIM,Camera} ${HOME}/.Trash/
		open -R ${HOME}/.Trash
		mkdir ${HOME}/{DCIM,FCIM,Camera}
	fi
else
	mkdir -p ${HOME}/{DCIM,FCIM,Camera}
fi
# If DCIM and Camera aren't directories in ${HOME}/ then substitute symbolic links by or add these directories.

ln -s ${HOME}/.files/.inputrc ${HOME}/.inputrc
#ln -s ${HOME}/.files/.shrc ${HOME}/.shrc
#ln -s ${HOME}/.files/.shinit ${HOME}/.shinit
#ln -s ${HOME}/.files/.profile ${HOME}/.profile
ln -s ${HOME}/.files/.exports ${HOME}/.exports
ln -s ${HOME}/.files/.functions ${HOME}/.functions
ln -s ${HOME}/.files/.aliases ${HOME}/.aliases
ln -s ${HOME}/.files/.bashrc ${HOME}/.bashrc
ln -s ${HOME}/.files/.bash_login ${HOME}/.bash_login
ln -s ${HOME}/.files/.bash_profile ${HOME}/.bash_profile
ln -s ${HOME}/.files/.bash_logout ${HOME}/.bash_logout
ln -s ${HOME}/.files/.bash_prompt ${HOME}/.bash_prompt
ln -s ${HOME}/.files/.zshrc ${HOME}/.zshrc
ln -s ${HOME}/.files/.zprofile ${HOME}/.zprofile
#ln -s ${HOME}/.files/.ssh ${HOME}/.ssh
ln -s ${HOME}/.files/.vimrc ${HOME}/.vimrc
ln -s ${HOME}/.files/.vim ${HOME}/.vim
ln -s ${HOME}/.files/.gitconfig ${HOME}/.gitconfig
ln -s ${HOME}/.files/.gitignore_global ${HOME}/.gitignore_global
cp -R ${HOME}/.files/Library/Scripts/. ${HOME}/Library/Scripts/ #sudo rmdir ${HOME}/Library/Scripts && ln -s ${HOME}/.files/Library/Scripts ${HOME}/Library/Scripts && chmod -h 700 ${HOME}/Library/Scripts
cp -R ${HOME}/.files/Library/Services/. ${HOME}/Library/Services/ #sudo rmdir ${HOME}/Library/Services && ln -s ${HOME}/.files/Library/Services ${HOME}/Library/Services && chmod -h 700 ${HOME}/Library/Services
ln -s ${HOME}/Downloads/Miscellaneous ${HOME}/Miscellaneous/Downloads
ln -s ${HOME}/Downloads/Documents ${HOME}/Documents/Downloads
ln -s ${HOME}/Downloads/Pictures ${HOME}/Pictures/Downloads
ln -s ${HOME}/Downloads/Movies ${HOME}/Movies/Downloads
ln -s ${HOME}/Downloads/Music ${HOME}/Music/Downloads
ln -s ${HOME}/DCIM ${HOME}/Pictures/DCIM
ln -s ${HOME}/FCIM ${HOME}/Pictures/FCIM
ln -s ${HOME}/Camera ${HOME}/Pictures/Camera
# Create user-specific custom symbolic links.

> ${HOME}/.hushlogin # Create the .hushlogin file in the current user's home folder. /!\ speeds up terminal emulator opening? https://news.ycombinator.com/item?id=3879833

#chflags nohidden ${HOME}/Library # Show the hidden Library folder. [This script also enables hidden files display which overrides this.]

#dscl . delete /Users/kvpb Picture
#sudo dscl . create /Users/kvpb Picture "/Users/${HOME}/Pictures/UserPictures/KVPB.tif"
# Set user picture. https://support.apple.com/kb/PH25797

cecho 'Third-Party: System-Wide & User-Specific Xenogenetic Software & Preferences' $yellow

#echo 'Homebrew'
#
#/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" # Download and install Homebrew.
#
#brew tap Homebrew/bundle # Download and install homebrew-bundle.

echo 'iTerm2 (com.googlecode.iterm2)'

#defaults write com.googlecode.iterm2 HideFromDockAndAppSwitcher -int 1 # Hide the app (but not its shortcut) from the Dock and the Application Switcher. (iTerm->Preferences (Command-Comma)->Appearance [tab]->Exclude from Dock and ⌘-Tab Application Switcher [checkbox])

defaults write com.googlecode.iterm2 PromptOnQuit -bool FALSE # Hide quit prompt.

#echo 'Hyper (co.zeit.hyper, co.zeit.hyper.helper)'
#
#/System/Library/Frameworks/JavaScriptCore.framework/Versions/A/Resources/jsc ${HOME}/.files/lib/scpt/InstallHyper.js # Install Hyper.
#
#ln -s ${HOME}/.files/.hyper.js ${HOME}/.hyper.js # Configure Hyper.

echo 'Jumpcut (net.sf.Jumpcut)'

defaults write net.sf.Jumpcut SUCheckAtStartup -bool TRUE # Check for updates on launch.

defaults write net.sf.Jumpcut "ShortcutRecorder mainHotkey" -array '{keyCode = 9;modifierFlags = 786432;}' # Set Control-Option-V (⌃⌥V) as main hotkey.

defaults write net.sf.Jumpcut bezelAlpha -float 0.2501524448394775 # Set bezel transparency to default.

defaults write net.sf.Jumpcut displayNum -int 10 # Display 10 clippings in menu.

defaults write net.sf.Jumpcut lastRun -int 0.6

defaults write net.sf.Jumpcut loadOnStartup -bool TRUE # Load Jumpcut on startup?

defaults write net.sf.Jumpcut menuIcon -int 0 # Set Jumpcut icon as menu item icon.

defaults write net.sf.Jumpcut menuSelectionPastes -bool TRUE # Menu selection pastes. ('Selecting a clipping from the menu causes it to be pasted instead of copied back onto the pasteboard.')

defaults write net.sf.Jumpcut rememberNum -int 99 # Remember 99 clippings. ('Controls how many clippings Jumpcut stores in its stack'.)

defaults write net.sf.Jumpcut savePreference -int 2 # Save after each clip.

defaults write net.sf.Jumpcut stickyBezel -bool FALSE # No sticky bezel. ('The bezel must be manually dismissed using the "escape" of "return" keys.')

defaults write net.sf.Jumpcut wraparoundBezel -bool TRUE # Wraparound bezel. ('In the bezel, moving down from the last item takes you to the top and moving up from the first item takes you to the bottom.')

echo 'SizeUp (com.irradiatedsoftware.SizeUp)'

defaults write com.irradiatedsoftware.SizeUp StartAtLogin -bool TRUE # Launch SizeUp at login.

defaults write com.irradiatedsoftware.SizeUp ShowPrefsOnNextStart -bool FALSE # Hide the preferences window at launch.

echo 'Firefox (org.mozilla.firefox)'

defaults write com.apple.LaunchServices LSHandlers -array-add \
                                                              '{LSHandlerRoleAll=org.mozilla.firefox;LSHandlerURLScheme=http;}' \
                                                              '{LSHandlerRoleAll=org.mozilla.firefox;LSHandlerURLScheme=https;}' \
                                                              '{LSHandlerContentType=public.html;LSHandlerRoleViewer=org.mozilla.firefox;}' \
                                                              '{LSHandlerContentType=public.url;LSHandlerRoleViewer=org.mozilla.firefox;}'
# Set Firefox as default web browser.

echo 'Transmission (org.m0k.transmission)'

defaults write org.m0k.transmission UseIncompleteDownloadFolder -bool TRUE
defaults write org.m0k.transmission IncompleteDownloadFolder -string "${HOME}/Downloads/Transmission"
# Set incomplete download path to ${HOME}/Downloads/Transmission.

#defaults write org.m0k.transmission DeleteOriginalTorrent -bool TRUE # Move original torrent files to trash.

defaults write org.m0k.transmission DownloadAsk -bool FALSE
defaults write org.m0k.transmission MagnetOpenAsk -bool FALSE
# Disable confirmation prompt before downloading.

defaults write org.m0k.transmission WarningDonate -bool FALSE # Hide the donate message.
defaults write org.m0k.transmission WarningLegal -bool FALSE # Hide the legal disclaimer.

defaults write org.m0k.transmission BlocklistURL -string "http://john.bitsurge.net/public/biglist.p2p.gz" # Enable IP blocking, and set IP blocklist to John Tyree's.
defaults write org.m0k.transmission BlocklistAutoUpdate -bool TRUE # Enable IP blocklist autoupdate.

echo 'VMware Fusion 8 (com.vmware.fusion)'

defaults write com.vmware.fusion showStartMenu3 -int 0 # Hide menu bar icon. (Set VMware Fusion 8: Preferences: General: Applications menu: Show in menu bar to Never.)

echo 'Photoshop Lightroom 6 (com.adobe.Lightroom6)'

defaults write com.adobe.Lightroom6 prefsWindow_currentTab -integer 1

defaults write com.adobe.Lightroom6 AgLibrary_libraryPanel_Enabled -boolean FALSE
defaults write com.adobe.Lightroom6 AgLibrary_collectionsPanel_Enabled -boolean FALSE
defaults write com.adobe.Lightroom6 AgLibrary_publishServicesPanel_Enabled -boolean FALSE
defaults write com.adobe.Lightroom6 AgLibrary_filterBarVisible -boolean FALSE

defaults write com.adobe.Lightroom6 Lightroom_hideAppActivity -boolean YES
defaults write com.adobe.Lightroom6 Lightroom_userIdentityPlateMode -string "app_version"
defaults write com.adobe.Lightroom6 HasClickedOnIdentityPlate -boolean YES

defaults write com.adobe.Lightroom6 ModulePicker_hideModule_com.adobe.ag.layout.book -boolean TRUE
defaults write com.adobe.Lightroom6 ModulePicker_hideModule_com.adobe.ag.location -boolean TRUE
defaults write com.adobe.Lightroom6 ModulePicker_hideModule_com.adobe.ag.print -boolean TRUE
defaults write com.adobe.Lightroom6 ModulePicker_hideModule_com.adobe.ag.slideshow -boolean TRUE
defaults write com.adobe.Lightroom6 ModulePicker_hideModule_com.adobe.ag.wpg -boolean TRUE

for i in 'Activity Monitor' 'Calendar' 'Contacts' 'cfprefsd' 'Disk Utility' 'Dock' 'Finder' 'Mail' 'Messages' 'Safari' 'System Preferences' 'SystemUIServer' 'TextEdit' 'Xcode'
do
	killall "${i}" > /dev/null 2>&1
done
# Kill all affected applications except terminal emulators.

echo ''
cecho 'OS X 10.9 Mavericks has been configured.' $yellow

cecho 'A restart is required for some of these changes to take effect. Restart...?, \e[4my\e[0mes or \e[4mn\e[0mo?' $green
read -r input
if [[ ${input} =~ ^([Yy]|[Yy][Ee][Ss]|[Yy][Ee][Aa][Hh])$ ]]
then
	osascript -e 'tell app "System Events" to restart' # Restart without confirmation.
else
	cecho 'OS X 10.9 Mavericks has been configured.'# $osxmavericksphotoansinearestmeancolor
	exit
fi
